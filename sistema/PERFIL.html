<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tommy Tech</title>

    <link rel="shortcut icon" href="../assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="sistema.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.9.0/dist/sweetalert2.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.9.0/dist/sweetalert2.all.min.js"></script>
    <script src="https://kit.fontawesome.com/28d256e67b.js" crossorigin="anonymous"></script>

</head>
<body>


    <section id="sidebar">
		<a href="sistema.html" class="brand">
			<img src="../assets/tommyWhite.png" alt="logo tommy">
		</a>
		<ul class="side-menu top">
			<li>
				<a href="sistema.html">
					<i class='bx bx-home-alt-2'></i>
					<span class="text">Início</span>
				</a>
			</li>
			<li>
				<a href="CURSOS.html">
					<i class='bx bx-book-reader' ></i>
					<span class="text">Cursos</span>
				</a>
			</li>
			<li>
				<a href="VIDEOS.html">
					<i class='bx bxl-youtube'></i>
					<span class="text">Vídeos</span>
				</a>
			</li>
			<li>
				<a href="ATIVIDADES.html">
					<i class='bx bx-task-x'></i>
					<span class="text">Atividades</span>
				</a>
			</li>
			<li>
				<a href="CERTIFICADOS.html">
					<i class='bx bxs-certification'></i>
					<span class="text">Certificados</span>
				</a>
			</li>
            <li>
				<a href="CALENDARIO.html">
					<i class='bx bx-calendar'></i>
					<span class="text">Calendário</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#">
					<i class='bx bxs-cog' ></i>
					<span class="text">Configurações</span>
				</a>
			</li>
			<li>
				<a href="#" class="logout">
					<i class='bx bx-log-out' onclick="sair()"></i>
					<span class="text" onclick="sair()">Sair</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categorias</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Pesquisar..." >
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<a href="PERFIL.html" class="perfil">
				<img src="../assets/profile.png" alt="Foto de perfil" id="profile-pic2">
			</a>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Meu perfil</h1>
					<ul class="breadcrumb">
						<li>
							<a href="sistema.html">Início</a>
						</li>
						<li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="PERFIL.html">Meu Perfil</a>
						</li>
					</ul>
				</div>
			</div>

			<ul class="foto-perfil">
				<li>
					<div class="hero">
						<div class="usuario">
							<div class="card">
								<h1 id="logado"></h1>
								<p id="nome"></p>
								<img src="../assets/profile.png" alt="Foto de perfil" id="profile-pic">
								<label for="input-file" class="up_img" id="reload-button">Carregar imagem</label>
								<input type="file" accept="image/*" id="input-file" onchange="converterImagem()">
							</div>
						</div>
						<div class="info">
							<h1>Meu perfil</h1>
							<p>Visualize e edite suas informações pessoais abaixo.</p>
							<div class="email">
								<h4>Email de login:</h4>
								<p id="email"></p>
							</div>
							<div class="mudar__nome">
								<h1>Alterar Nome</h1>
								<input type="text" class="novo-nome" placeholder="Digite o novo nome">
    							<button class="salvar">Mudar nome</button>
							</div>
							<div class="mudar__senha">
								<h1>Alterar Senha</h1>
								<input type="text" class="novo-nome" placeholder="Digite a nova senha">
    							<button class="salvar">Mudar senha</button>
							</div>
							<div class="delet">
								<button class="delet__profile" onclick="delet()"><i class='bx bx-trash-alt'></i>
									<span class="text">Deletar perfil</span></button>
							</div>
						</div>
					</div>
				</li>
			</ul>

		</main>
		<!-- MAIN -->
	</section>






    <!-- CUSTOM JS LINKS -->
    <script type="text/javascript" src="sis.js"></script>


	<script>
		

		



		if(localStorage.getItem('token') == null){
    
			alert('Você precisa estar logado para acessar esta página')
			window.location.href = "../login/login.html"

			}

			let userLogado = JSON.parse(localStorage.getItem('userLogado'))
			let logado = document.querySelector('#logado')

			logado.innerHTML = `${userLogado.nome }`

			let emailLogado = JSON.parse(localStorage.getItem('userLogado'))
			let email = document.querySelector('#email')

			email.innerHTML = `${userLogado.email }`
			
			let nomeLogado = JSON.parse(localStorage.getItem('userLogado'))
			let nome = document.querySelector('#nome')
			
			nome.innerHTML = `${'@' + userLogado.nome }`


			function sair(){
				localStorage.removeItem('token')
				window.location.href = "../index.html"
				localStorage.removeItem('userLogado')
			}

			function delet(){

				const swalWithBootstrapButtons = Swal.mixin({
				customClass: {
					confirmButton: "btn btn-success",
					cancelButton: "btn btn-danger"
				},
				buttonsStyling: false
				});
				Swal.fire({
				title: "Você tem certeza?",
				text: "Isso não poderá ser revertido!",
				icon: "warning",
				showCancelButton: true,
				confirmButtonText: "Sim, deletar perfil!",
				cancelButtonText: "Não, cancelar!",
				reverseButtons: true
				}).then((result) => {
				if (result.isConfirmed) {
					Swal.fire({
					title: "Perfil deletado!",
					text: "Perfil deletado com sucesso.",
					icon: "success"
					});
					localStorage.clear()
					
					setTimeout(()=>{
					window.location.href = "../index.html"
					}, 2000)
				} else if (
					/* Read more about handling dismissals below */
					result.dismiss === Swal.DismissReason.cancel
				) {
					Swal.fire({
					title: "Ação cancelada",
					text: "Seu perfil continua salvo :)",
					icon: "error"
					});
				}
				});
			}
		

		


		

		
	</script>




</body>
</html>